(()=>{var e={};e.id=587,e.ids=[587],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},73051:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(75299),r(14654),r(35866);var a=r(23191),s=r(88716),n=r(37922),i=r.n(n),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["baker",{children:["cakes",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75299)),"/Users/craga/Desktop/Cakez/cakez-marketplace/app/dashboard/baker/cakes/new/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14654)),"/Users/craga/Desktop/Cakez/cakez-marketplace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/craga/Desktop/Cakez/cakez-marketplace/app/dashboard/baker/cakes/new/page.tsx"],m="/dashboard/baker/cakes/new/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/baker/cakes/new/page",pathname:"/dashboard/baker/cakes/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},91400:(e,t,r)=>{Promise.resolve().then(r.bind(r,82284)),Promise.resolve().then(r.bind(r,65496))},73450:(e,t,r)=>{Promise.resolve().then(r.bind(r,89957))},88442:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},82284:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var a=r(10326),s=r(90434),n=r(77109),i=r(17577);function o(){let{data:e,status:t}=(0,n.useSession)(),[r,o]=(0,i.useState)(!1);return(0,a.jsxs)("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx(s.default,{href:"/",className:"flex items-center",children:a.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-cake-pink to-cake-purple bg-clip-text text-transparent",children:"Cakez"})})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[a.jsx(s.default,{href:"/browse",className:"text-gray-700 hover:text-cake-purple px-3 py-2 rounded-md text-sm font-medium",children:"Browse Cakes"}),a.jsx(s.default,{href:"/bakers",className:"text-gray-700 hover:text-cake-purple px-3 py-2 rounded-md text-sm font-medium",children:"Find Bakers"}),"authenticated"===t?(0,a.jsxs)(a.Fragment,{children:["BAKER"===e.user.role&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(s.default,{href:"/dashboard/baker",className:"text-gray-700 hover:text-cake-purple px-3 py-2 rounded-md text-sm font-medium",children:"My Dashboard"}),a.jsx(s.default,{href:"/dashboard/baker/cakes",className:"text-gray-700 hover:text-cake-purple px-3 py-2 rounded-md text-sm font-medium",children:"My Cakes"})]}),"CUSTOMER"===e.user.role&&a.jsx(a.Fragment,{children:a.jsx(s.default,{href:"/dashboard/customer",className:"text-gray-700 hover:text-cake-purple px-3 py-2 rounded-md text-sm font-medium",children:"My Orders"})}),a.jsx("button",{onClick:()=>(0,n.signOut)({callbackUrl:"/"}),className:"bg-gradient-to-r from-cake-pink to-cake-purple text-white px-4 py-2 rounded-lg text-sm font-medium hover:opacity-90",children:"Sign Out"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(s.default,{href:"/auth/signin",className:"text-gray-700 hover:text-cake-purple px-3 py-2 rounded-md text-sm font-medium",children:"Sign In"}),a.jsx(s.default,{href:"/auth/signup",className:"bg-gradient-to-r from-cake-pink to-cake-purple text-white px-4 py-2 rounded-lg text-sm font-medium hover:opacity-90",children:"Join as Baker"})]})]}),a.jsx("div",{className:"md:hidden flex items-center",children:a.jsx("button",{onClick:()=>o(!r),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-cake-purple focus:outline-none",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),r&&a.jsx("div",{className:"md:hidden",children:(0,a.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[a.jsx(s.default,{href:"/browse",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"Browse Cakes"}),a.jsx(s.default,{href:"/bakers",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"Find Bakers"}),"authenticated"===t?(0,a.jsxs)(a.Fragment,{children:["BAKER"===e.user.role&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(s.default,{href:"/dashboard/baker",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"My Dashboard"}),a.jsx(s.default,{href:"/dashboard/baker/cakes",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"My Cakes"})]}),"CUSTOMER"===e.user.role&&a.jsx(s.default,{href:"/dashboard/customer",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"My Orders"}),a.jsx("button",{onClick:()=>(0,n.signOut)({callbackUrl:"/"}),className:"w-full text-left text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"Sign Out"})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(s.default,{href:"/auth/signin",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"Sign In"}),a.jsx(s.default,{href:"/auth/signup",className:"text-gray-700 hover:text-cake-purple block px-3 py-2 rounded-md text-base font-medium",children:"Join as Baker"})]})]})})]})}},65496:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>n});var a=r(10326),s=r(77109);function n({children:e}){return a.jsx(s.SessionProvider,{children:e})}},89957:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(10326),s=r(17577),n=r(77109),i=r(35047),o=r(74723),l=r(74064),d=r(42576),c=r(46226);function m({images:e,onImagesChange:t,maxImages:r=5}){let[n,i]=(0,s.useState)(!1),o=async a=>{let s=a.target.files;if(!s||0===s.length)return;if(e.length+s.length>r){alert(`You can only upload up to ${r} images`);return}i(!0);let n=[...e];for(let e=0;e<s.length;e++){let t=s[e],r=new FormData;r.append("file",t),r.append("folder","cakes");try{let e=await fetch("/api/upload",{method:"POST",body:r});if(!e.ok)throw Error("Upload failed");let t=await e.json();n.push(t.url)}catch(e){console.error("Error uploading image:",e),alert("Failed to upload image. Please try again.")}}t(n),i(!1)},l=r=>{t(e.filter((e,t)=>t!==r))};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("div",{className:"relative h-32 rounded-lg overflow-hidden",children:a.jsx(c.default,{src:e,alt:`Cake image ${t+1}`,fill:!0,className:"object-cover"})}),a.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),e.length<r&&(0,a.jsxs)("label",{className:"relative h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-cake-pink",children:[a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:o,className:"sr-only",disabled:n}),a.jsx("div",{className:"text-center",children:n?a.jsx("span",{className:"text-gray-500",children:"Uploading..."}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("svg",{className:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),a.jsx("span",{className:"text-sm text-gray-500",children:"Add Image"})]})})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Upload up to ",r," images. Recommended size: 1200x1200px"]})]})}let p=d.z.object({title:d.z.string().min(3,"Title must be at least 3 characters"),description:d.z.string().min(20,"Description must be at least 20 characters"),price:d.z.number().positive("Price must be positive"),category:d.z.string().min(1,"Please select a category"),images:d.z.array(d.z.string()).min(1,"At least one image is required")});function u(){let{data:e,status:t}=(0,n.useSession)(),r=(0,i.useRouter)(),[d,c]=(0,s.useState)([]),[u,x]=(0,s.useState)([]),{register:h,handleSubmit:g,setValue:k,formState:{errors:f,isSubmitting:b}}=(0,o.cI)({resolver:(0,l.F)(p)}),y=async e=>{try{if(!(await fetch("/api/cakes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create cake listing");r.push("/dashboard/baker/cakes")}catch(e){console.error("Error creating cake:",e),alert("Failed to create cake listing. Please try again.")}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Add New Cake"}),(0,a.jsxs)("form",{onSubmit:g(y),className:"space-y-6 bg-white p-8 rounded-lg shadow",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Cake Title"}),a.jsx("input",{...h("title"),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"Chocolate Dream Cake"}),f.title&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.title.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...h("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"Describe your cake, ingredients, flavors, and what makes it special..."}),f.description&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.description.message})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (\xa3)"}),a.jsx("input",{...h("price",{valueAsNumber:!0}),type:"number",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"35.00"}),f.price&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.price.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsxs)("select",{...h("category"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a category"}),d.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),f.category&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.category.message})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cake Images"}),a.jsx(m,{images:u,onImagesChange:x,maxImages:5}),f.images&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:f.images.message})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[a.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-gradient-to-r from-cake-pink to-cake-purple text-white py-2 px-4 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:b?"Creating...":"Create Cake Listing"}),a.jsx("button",{type:"button",onClick:()=>r.back(),className:"px-6 py-2 border border-gray-300 rounded-lg font-medium hover:bg-gray-50",children:"Cancel"})]})]})]})}},46226:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(69029),s=r.n(a)},69029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return o}});let a=r(91174),s=r(23078),n=r(92481),i=a._(r(86820));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=n.Image},75299:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=r(68570);let s=(0,a.createProxy)(String.raw`/Users/craga/Desktop/Cakez/cakez-marketplace/app/dashboard/baker/cakes/new/page.tsx`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`/Users/craga/Desktop/Cakez/cakez-marketplace/app/dashboard/baker/cakes/new/page.tsx#default`)},14654:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,metadata:()=>h});var a=r(19510),s=r(85384),n=r.n(s);r(67272);var i=r(68570);let o=(0,i.createProxy)(String.raw`/Users/craga/Desktop/Cakez/cakez-marketplace/app/components/Providers.tsx`),{__esModule:l,$$typeof:d}=o;o.default;let c=(0,i.createProxy)(String.raw`/Users/craga/Desktop/Cakez/cakez-marketplace/app/components/Providers.tsx#Providers`),m=(0,i.createProxy)(String.raw`/Users/craga/Desktop/Cakez/cakez-marketplace/app/components/Navigation.tsx`),{__esModule:p,$$typeof:u}=m;m.default;let x=(0,i.createProxy)(String.raw`/Users/craga/Desktop/Cakez/cakez-marketplace/app/components/Navigation.tsx#default`),h={title:"Cakez - Find Your Perfect Birthday Cake",description:"Connect with talented local bakers for custom birthday cakes"};function g({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:n().className,children:(0,a.jsxs)(c,{children:[a.jsx(x,{}),a.jsx("main",{className:"min-h-screen bg-gray-50",children:e})]})})})}},67272:()=>{}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,93,481,612],()=>r(73051));module.exports=a})();