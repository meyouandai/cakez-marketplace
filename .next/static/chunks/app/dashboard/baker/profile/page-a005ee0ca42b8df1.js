(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{3370:function(e,s,r){Promise.resolve().then(r.bind(r,3656))},3656:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return m}});var t=r(7437),a=r(2265),i=r(998),n=r(6463),l=r(9343),o=r(1014),c=r(6700);let d=c.z.object({businessName:c.z.string().min(2,"Business name must be at least 2 characters"),description:c.z.string().min(50,"Description must be at least 50 characters"),location:c.z.string().min(2,"Location is required"),deliveryRadius:c.z.number().min(1).max(50)});function m(){let{data:e,status:s}=(0,i.useSession)(),r=(0,n.useRouter)(),[c,m]=(0,a.useState)(!0),[u,p]=(0,a.useState)(null),{register:x,handleSubmit:b,formState:{errors:h,isSubmitting:f},reset:g}=(0,l.cI)({resolver:(0,o.F)(d)});(0,a.useEffect)(()=>{"unauthenticated"===s?r.push("/auth/signin"):(null==e?void 0:e.user.role)!=="BAKER"?r.push("/"):y()},[e,s,r]);let y=async()=>{try{let e=await fetch("/api/bakers/profile");if(e.ok){let s=await e.json();p(s),g(s)}}catch(e){console.error("Error fetching profile:",e)}finally{m(!1)}},k=async e=>{try{if(!(await fetch(u?"/api/bakers/profile":"/api/bakers",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save profile");r.push("/dashboard/baker")}catch(e){console.error("Error saving profile:",e),alert("Failed to save profile. Please try again.")}};return c?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:[u?"Edit":"Create"," Your Baker Profile"]}),(0,t.jsxs)("form",{onSubmit:b(k),className:"space-y-6 bg-white p-8 rounded-lg shadow",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"businessName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),(0,t.jsx)("input",{...x("businessName"),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"Sweet Delights Bakery"}),h.businessName&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.businessName.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Description"}),(0,t.jsx)("textarea",{...x("description"),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"Tell customers about your baking experience, specialties, and what makes your cakes special..."}),h.description&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.description.message}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Minimum 50 characters"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,t.jsx)("input",{...x("location"),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"London, UK"}),h.location&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.location.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"deliveryRadius",className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Radius (miles)"}),(0,t.jsx)("input",{...x("deliveryRadius",{valueAsNumber:!0}),type:"number",min:"1",max:"50",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cake-pink focus:border-transparent",placeholder:"10"}),h.deliveryRadius&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:h.deliveryRadius.message}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"How far you're willing to deliver"})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-cake-pink to-cake-purple text-white py-2 px-4 rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50",children:f?"Saving...":"Save Profile"}),(0,t.jsx)("button",{type:"button",onClick:()=>r.back(),className:"px-6 py-2 border border-gray-300 rounded-lg font-medium hover:bg-gray-50",children:"Cancel"})]})]})]})}}},function(e){e.O(0,[998,268,971,23,744],function(){return e(e.s=3370)}),_N_E=e.O()}]);